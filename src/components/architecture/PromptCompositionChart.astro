---
// Prompt Token Composition Chart
---
<div class="bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-white/10 my-8 not-prose">
    <h3 class="font-bold text-slate-800 dark:text-white mb-2">Prompt Token Composition</h3>
    <p class="text-xs text-slate-500 dark:text-slate-400 mb-6">How the Architecture utilizes the context window.</p>
    <div class="chart-container h-[300px] relative">
        <canvas id="promptCompositionChart"></canvas>
    </div>
</div>

<script>
    import Chart from 'chart.js/auto';

    document.addEventListener('DOMContentLoaded', () => {
        // Chart Defaults
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748B';
    
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: { padding: 12, cornerRadius: 8 },
                legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } }
            }
        };

        const ctx1 = document.getElementById('promptCompositionChart');
        if (ctx1) {
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ["Scene Action", "Style Defs", "Character Traits", "Narrative State", "Camera Info"],
                    datasets: [{
                        label: 'Token Usage %',
                        data: [35, 15, 20, 20, 10],
                        backgroundColor: ['#0EA5E9', '#F59E0B', '#F59E0B', '#0F766E', '#6366F1'],
                        borderRadius: 4,
                        barThickness: 24
                    }]
                },
                options: { ...commonOptions, indexAxis: 'y', scales: { x: { grid: { display: false } }, y: { grid: { display: false } } } }
            });
        }
    });
</script>
